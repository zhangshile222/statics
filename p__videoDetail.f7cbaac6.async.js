(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0oO+":function(e,t,a){e.exports={box:"box___1QrkJ",tagList:"tagList___3tkAR"}},"2lE5":function(e,t,a){"use strict";a("14J3");var n=a("BMrR"),c=a("oBTY"),i=(a("DjyN"),a("NUBc")),r=a("k1fw"),s=a("q1tI"),o=a("0oO+"),l=a.n(o),d=a("QttV"),j=a("nKUr"),u=function(e){var t=e.type,a=t.name,n=t.children,c=t.id;return Object(j["jsxs"])("div",{className:l.a.box,children:[Object(j["jsx"])("h2",{children:Object(j["jsx"])(d["a"],{to:"/type/".concat(c),children:a})}),Object(j["jsxs"])("div",{className:l.a.tagList,children:[n&&n.map((function(e){return Object(j["jsx"])(d["a"],{to:"/type/".concat(c,"?type=").concat(e.id),children:e.name},e.id)})),Object(j["jsx"])(d["a"],{to:"/type/".concat(c),children:"\u66f4\u591a >"})]})]})},b=(a("jCWc"),a("kPKH")),p=a("oORS"),v=a.n(p),m=a("CJq5"),x=function(e){var t=e.video,a=t.id,n=t.name,c=t.picture,i=t.remarks,s=t.serial,o={span:6,xs:{span:8},sm:{span:8},md:{span:6},lg:{span:6},xl:{span:4}};return Object(j["jsxs"])(b["a"],Object(r["a"])(Object(r["a"])({className:v.a.box},o),{},{children:[Object(j["jsxs"])(m["a"],{id:a,banner:!1,name:n,picture:c,children:[!!s&&Object(j["jsx"])("span",{className:v.a.serial,children:s}),Object(j["jsx"])("span",{className:v.a.remark,children:i})]}),Object(j["jsxs"])("div",{className:v.a.info,children:[Object(j["jsx"])("p",{className:[v.a.name,"text-overflow-ellipsis"].join(" "),children:Object(j["jsx"])(d["a"],{to:"/video/detail/".concat(a),children:n})}),Object(j["jsx"])("p",{className:[v.a.summary,"text-overflow-ellipsis"].join(" "),children:i})]})]}))},O=function(){return Object(j["jsx"])("span",{style:{color:"#a9a9a9",padding:"0 8px"},children:"\u8fd8\u6ca1\u6709\u5f71\u7247\u54e6"})},f=a("JdBa"),h=a.n(f),_=a("7AqN"),y=a("9kvl"),g=a("Uujy"),N=a("TBcU"),k=a.n(N),B=function(){return Object(j["jsxs"])("div",{className:k.a.loading,children:[Object(j["jsx"])("span",{}),Object(j["jsx"])("span",{}),Object(j["jsx"])("span",{}),Object(j["jsx"])("span",{}),Object(j["jsx"])("span",{})]})},I=a("H9CC"),S=function(e){var t=e.videoData,a=e.params,n=Object(_["g"])(),c=Object(_["h"])(),s=t.page,o=t.total,l=t.pageSize,d=t.maxPage,u=o;function b(e){n.push({pathname:c.pathname,query:Object(r["a"])(Object(r["a"])({},a),{},{currentPage:e})})}return o/l>d&&(u=d*l),Object(j["jsx"])(i["a"],{current:Number(s),total:u,pageSize:l,showSizeChanger:!1,responsive:!0,onChange:b,style:{marginTop:"20px"},showTotal:function(){return Object(j["jsx"])("span",{className:"white",children:"\u5171 ".concat(o," \u6761\u5f71\u7247")})}})},w=function(e){var t,a=e.type,i=e.video,r=e.params,o=void 0===r?null:r,l=e.dispatch,d={};d=o?Object(I["a"])(i.searchOrder,o):{};var b=JSON.stringify(d),p=i[b],v=i.loading[b],m=p,f=Object(s["useRef"])(),_=Object(g["a"])(f),y=[];return Object(s["useEffect"])((function(){!_||m||v||(null===a||void 0===a?void 0:a.id)&&l({type:"video/getData",params:{type:null===a||void 0===a?void 0:a.id}})}),[_]),m||(y=Object(c["a"])(Array(10).keys())),null!==(t=m)&&void 0!==t&&t.data&&(m=m.data),Object(j["jsxs"])("div",{className:h.a.box,ref:f,children:[a&&Object(j["jsx"])(u,{type:a}),Object(j["jsxs"])(n["a"],{className:h.a.videoList,gutter:{xs:8,sm:8,md:16,lg:16},children:[v&&Object(j["jsx"])(B,{}),(m||y).map((function(e){return Object(j["jsx"])(x,{video:e},e.id||e)})),m&&!m.length&&Object(j["jsx"])(O,{})]}),!(null===p||void 0===p||!p.total)&&Object(j["jsx"])(S,{videoData:p,params:d})]})};t["a"]=Object(y["c"])((function(e){var t=e.video;return{video:t}}))(w)},CJq5:function(e,t,a){"use strict";var n=a("tJVT"),c=a("q1tI"),i=a.n(c),r=a("QttV"),s=a("KBfk"),o=a.n(s),l=function(e){if(!e||!e.cdn)return(null===e||void 0===e?void 0:e.pic)||(null===e||void 0===e?void 0:e.url)||"/";var t=e.cdn,a=t.r.path,n=t.path;return"".concat("https://cdn.jsdelivr.net/","gh/").concat(a,"@main/").concat(n)},d=a("nKUr");t["a"]=function(e){var t=e.id,a=e.name,s=void 0===a?"":a,j=e.banner,u=void 0===j||j,b=e.children,p=e.picture,v=e.playing,m=void 0!==v&&v,x=e.query,O=void 0===x?{}:x,f=Object(c["useState"])({}),h=Object(n["a"])(f,2),_=h[0],y=h[1];return Object(c["useEffect"])((function(){setTimeout((function(){y({backgroundImage:"url(".concat(l(p),")")})}),100)})),Object(d["jsxs"])("div",{className:[o.a.box,u?o.a.bannerBox:o.a.videoBox].join(" "),children:[t&&Object(d["jsx"])(r["a"],{to:{pathname:"/video/detail/".concat(t),query:O},title:s,style:_,className:[o.a.imgItem,m?"playing":""].join(" "),children:b}),!t&&Object(d["jsx"])(i.a.Fragment,{children:b})]})}},JdBa:function(e,t,a){e.exports={box:"box___XrsTg",videoList:"videoList___3XBGv"}},KBfk:function(e,t,a){e.exports={box:"box___3IU96",imgItem:"imgItem___1cxMR",bannerBox:"bannerBox___3SIWB",videoBox:"videoBox___2aRJG",smallBox:"smallBox___2nHoI"}},TBcU:function(e,t,a){e.exports={loading:"loading___3vACX",load:"load___vcBqD"}},WVDo:function(e,t,a){e.exports={player:"player___3UmjK",flashBox:"flashBox___3SRNB",playerBox:"playerBox___2bvRs",iframe:"iframe___g-pFh",playAside:"playAside___11EOQ",close:"close___2entv",open:"open___1Jhqs",iframeUnfold:"iframeUnfold___1RjHm",videoTitle:"videoTitle___3rXcF",title:"title___113UI",name:"name___2znEx",playItem:"playItem___1XE1h",active:"active___1PTVl",loading:"loading___1iD5X",content:"content___1bqJ9",label:"label___qQvDM"}},dbR3:function(e,t,a){e.exports=a.p+"static/play-loading.a110de6e.gif"},hX4b:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n=function(){var e=window.localStorage.getItem("watch_recrod_key");return e?JSON.parse(e):[]},c=function(e){var t=n().filter((function(t){return t.playId!=e.playId&&t.vodId!=e.vodId}));return t.unshift(e),window.localStorage.setItem("watch_recrod_key",JSON.stringify(t))}},hizP:function(e,t,a){"use strict";var n=a("9kvl"),c=a("nKUr");t["a"]=function(e){var t=e.seoDescribe,a=e.seoKey,i=e.title;return Object(c["jsxs"])(n["b"],{children:[i&&Object(c["jsx"])("title",{children:i}),Object(c["jsx"])("meta",{name:"description",content:t}),Object(c["jsx"])("meta",{name:"keywords",content:a}),Object(c["jsx"])("meta",{property:"og:description",content:t})]})}},oORS:function(e,t,a){e.exports={box:"box___2-xxM",info:"info___2SAq8",name:"name___2gAja",summary:"summary___Uq3Fg",remark:"remark___35Kwx",serial:"serial___3n7Us"}},ts8u:function(e,t,a){"use strict";a.r(t);var n=a("9og8"),c=a("WmNS"),i=a.n(c),r=a("7AqN"),s=a("9kvl"),o=a("tJVT"),l=a("rlch"),d=a("QttV"),j=a("WVDo"),u=a.n(j),b=a("q1tI"),p=a("CJq5"),v=a("dbR3"),m=a.n(v),x=a("diY3"),O=a("hX4b"),f=a("hizP"),h=a("nKUr"),_=function(e){var t=e.url;return Object(h["jsx"])("iframe",{src:t,frameBorder:"0",width:"100%",height:"100%",allowFullScreen:!0})},y=function(){var e=Object(r["i"])(),t=e.id,a=Object(r["h"])(),n=Object(b["useState"])({}),c=Object(o["a"])(n,2),i=c[0],j=c[1],v=Object(s["i"])((function(e){return e.video[t]}))||{},y=Object(s["i"])((function(e){return e.player}))||{},g=Object(s["i"])((function(e){return e.global.config}))||{},N=Object(b["useState"])(!1),k=Object(o["a"])(N,2),B=k[0],I=k[1],S=Object(b["useState"])({}),w=Object(o["a"])(S,2),J=w[0],q=w[1],U=Object(s["h"])(x["c"],{manual:!0}),D=U.run;Object(b["useEffect"])((function(){if(v.players){var e=a.query.id,t=v.players.find((function(t){return!(!e||t.id!=e)||(!e||void 0)}));if(!t&&e&&(t=v.players[0]),t&&D(t.id),t){var n,c,i,r,s,o,l,d=(null===(n=t)||void 0===n||null===(c=n.cdn)||void 0===c?void 0:c.path)||(null===(i=t)||void 0===i?void 0:i.url)||"",u=g.globalParse||"";null!==(r=t)&&void 0!==r&&null!==(s=r.cdn)&&void 0!==s&&s.path?u="https://play.pangtai.video/play?url=":null!==(o=t)&&void 0!==o&&o.player&&y[null===(l=t.player)||void 0===l?void 0:l.key]&&(u=y[t.player.key].parse||""),t.url=d,t.parse=u}j({}),setTimeout((function(){j(t)}),0)}}),[a.search,v]),Object(b["useEffect"])((function(){if(v.players){var e=v.players.reduce((function(e,t){var a=t.player.key,n=t.title,c=t.url,i=t.id,r={title:n,url:c,id:i};return a in e?e[a].push(r):e[a]=[r],e}),{});q(e)}}),[v.players]),Object(b["useEffect"])((function(){if(null!==i&&void 0!==i&&i.id){var e=i.title,t=i.id,a=v.name,n=v.id,c=v.picture,r=v.year,s=v.doubanScore;Object(O["b"])({title:e,playId:t,name:a,vodId:n,picture:c[0],year:r,doubanScore:s})}}),[i]);var T=i.title,K=i.url,R=i.parse;return Object(h["jsxs"])("div",{children:[Object(h["jsx"])(f["a"],{title:"".concat(v.name||"").concat(T||"","-\u5b8c\u6574\u7248\u89c6\u9891\u5728\u7ebf\u89c2\u770b-").concat(g.siteName||""),seoDescribe:"".concat(v.name||"","\uff0c\u662f\u7531").concat(v.director||"","\u5bfc\u6f14\uff0c\u7531").concat(v.actor||"","\u7b49\u4e3b\u6f14\u7684\u5f71\u7247\uff0c\u4e8e").concat(v.year||"","\u4e0a\u6620\u3002\u5f71\u7247\u5267\u60c5\uff1a").concat(v.content||""),seoKey:"".concat(v.name||"","\uff0c\u7535\u89c6\u5267\u5168\u96c6\uff0c\u7535\u89c6\u5267\u5927\u5168\uff0c\u5728\u7ebf\u89c2\u770b\uff0c\u5b8c\u6574\u7248")}),Object(h["jsxs"])("div",{className:u.a.player,children:[Object(h["jsx"])("div",{className:u.a.flashBox,children:Object(h["jsxs"])("div",{className:[u.a.iframe,B?u.a.iframeUnfold:""].join(" "),children:[Object(l["d"])()&&K&&"/"!=K&&Object(h["jsx"])(h["Fragment"],{children:Object(h["jsx"])(_,{url:"".concat(R).concat(K)})}),(!K||"/"==K)&&Object(h["jsxs"])("div",{className:u.a.loading,children:[Object(h["jsx"])("div",{children:"\u8fde\u63a5\u6210\u529f,\u7a0d\u7b49\u6570\u636e\u6b63\u5728\u7f13\u51b2\u4e2d..."}),Object(h["jsx"])("img",{src:m.a,alt:"loading"})]}),B&&Object(h["jsx"])("div",{className:u.a.open,onClick:function(){return I(!1)}}),!B&&Object(h["jsx"])("div",{className:u.a.close,onClick:function(){return I(!0)}})]})}),Object(h["jsxs"])("div",{className:u.a.playAside,style:{display:B?"none":"block"},children:[Object(h["jsxs"])("div",{className:u.a.videoTitle,children:[(null===v||void 0===v?void 0:v.picture)&&Object(h["jsx"])(p["a"],{id:t,banner:!1,name:v.name,picture:null===v||void 0===v?void 0:v.picture[0],playing:!0}),Object(h["jsxs"])("div",{className:u.a.title,children:[Object(h["jsx"])("div",{className:u.a.name,children:v.name}),Object(h["jsxs"])("p",{children:["\u8bc4\u5206\uff1a",v.doubanScore]}),Object(h["jsxs"])("p",{children:["\u72b6\u6001\uff1a",v.remarks]}),Object(h["jsxs"])("p",{children:["\u5e74\u4ee3\uff1a",v.year]}),Object(h["jsxs"])("p",{children:["\u5bfc\u6f14\uff1a",v.director]}),Object(h["jsxs"])("p",{children:["\u6f14\u5458\uff1a",v.actor]}),Object(h["jsxs"])("p",{children:["\u5730\u533a\uff1a",v.area]}),Object(h["jsxs"])("p",{children:["\u7c7b\u578b\uff1a",v.vod_class]})]})]}),Object(h["jsxs"])("div",{className:u.a.playerBox,children:[Object.keys(J).map((function(e,t){var n=J[e],c=y[e]||{name:"\u5728\u7ebf\u64ad\u653e".concat(t+1),tips:""};return Object(h["jsxs"])("div",{className:u.a.playerList,children:[Object(h["jsxs"])("div",{className:u.a.playerInfo,children:[Object(h["jsx"])("span",{children:c.name}),Object(h["jsx"])("span",{children:c.tips})]}),Object(h["jsx"])("div",{className:u.a.playList,children:n.map((function(e,t){return Object(h["jsx"])(d["a"],{to:"".concat(a.pathname,"?id=").concat(e.id),className:[u.a.playItem,i.id==e.id?u.a.active:""].join(" "),children:e.title},t)}))})]},e)})),!Object.keys(J||{})&&Object(h["jsx"])("div",{className:"smile_tips",children:"\u8fd8\u6ca1\u6709\u627e\u5230\u64ad\u653e\u5730\u5740"})]})]})]}),Object(h["jsxs"])("div",{className:u.a.content,children:[Object(h["jsx"])("em",{className:u.a.label,children:"\u7b80\u4ecb\uff1a"}),v.content]})]})},g=y,N=a("2lE5"),k=function(){var e=Object(r["i"])(),t=e.id,a=Object(s["g"])(),n=Object(s["i"])((function(e){return e.video})),c=n.lastKey||"{}";return Object(b["useEffect"])((function(){if(!n.lastKey&&n[t]){var e={type:n[t].typeId,currentPage:1};a({type:"video/getData",params:e}),c=JSON.stringify(e)}})),Object(h["jsxs"])("div",{children:[Object(h["jsx"])(g,{}),Object(h["jsx"])(N["a"],{params:JSON.parse(c)})]})};k.getInitialProps=function(){var e=Object(n["a"])(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.match.params.id,n=t.store.getState(),n.loading.models.video){e.next=5;break}return e.next=5,t.store.dispatch({type:"video/getVideoData",videoId:a});case 5:if(n.loading.models.player){e.next=8;break}return e.next=8,t.store.dispatch({type:"player/getData"});case 8:return e.abrupt("return",t.store.getState());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t["default"]=k}}]);