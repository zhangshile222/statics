(self["webpackChunk"]=self["webpackChunk"]||[]).push([[447],{97636:e=>{e.exports={loading:"loading___3vACX",load:"load___vcBqD"}},1287:e=>{e.exports={box:"box___XrsTg",videoList:"videoList___3XBGv"}},70969:e=>{e.exports={box:"box___1QrkJ",tagList:"tagList___3tkAR"}},84075:e=>{e.exports={box:"box___2-xxM",info:"info___2SAq8",name:"name___2gAja",summary:"summary___Uq3Fg",remark:"remark___35Kwx",serial:"serial___3n7Us"}},15936:e=>{e.exports={player:"player___3UmjK",flashBox:"flashBox___3SRNB",playerBox:"playerBox___2bvRs",iframe:"iframe___g-pFh",playAside:"playAside___11EOQ",close:"close___2entv",open:"open___1Jhqs",iframeUnfold:"iframeUnfold___1RjHm",videoTitle:"videoTitle___3rXcF",title:"title___113UI",name:"name___2znEx",playItem:"playItem___1XE1h",active:"active___1PTVl",loading:"loading___1iD5X",content:"content___1bqJ9",label:"label___qQvDM"}},15909:e=>{e.exports={box:"box___3IU96",imgItem:"imgItem___1cxMR",bannerBox:"bannerBox___3SIWB",videoBox:"videoBox___2aRJG",smallBox:"smallBox___2nHoI"}},39285:(e,a,n)=>{"use strict";n.d(a,{Z:()=>i});var t=n(22231),s=n(85893);const i=function(e){var a=e.seoDescribe,n=e.seoKey,i=e.title;return(0,s.jsxs)(t.Helmet,{children:[i&&(0,s.jsx)("title",{children:i}),(0,s.jsx)("meta",{name:"description",content:a}),(0,s.jsx)("meta",{name:"keywords",content:n}),(0,s.jsx)("meta",{property:"og:description",content:a})]})}},28142:(e,a,n)=>{"use strict";n.d(a,{Z:()=>U});n(13062);var t=n(79294),s=n(86582),i=(n(26609),n(58297)),r=n(11849),o=n(67294),c=n(70969),l=n.n(c),d=n(19611),u=n(85893);const p=function(e){var a=e.type,n=a.name,t=a.children,s=a.id;return(0,u.jsxs)("div",{className:l().box,children:[(0,u.jsx)("h2",{children:(0,u.jsx)(d.rU,{to:"/type/".concat(s),children:n})}),(0,u.jsxs)("div",{className:l().tagList,children:[t&&t.map((function(e){return(0,u.jsx)(d.rU,{to:"/type/".concat(s,"?type=").concat(e.id),children:e.name},e.id)})),(0,u.jsx)(d.rU,{to:"/type/".concat(s),children:"\u66f4\u591a >"})]})]})};n(89032);var v=n(1635),m=n(84075),x=n.n(m),_=n(70029);const h=function(e){var a=e.video,n=a.id,t=a.name,s=a.picture,i=a.remarks,o=a.serial,c={span:6,xs:{span:8},sm:{span:8},md:{span:6},lg:{span:6},xl:{span:4}};return(0,u.jsxs)(v.Z,(0,r.Z)((0,r.Z)({className:x().box},c),{},{children:[(0,u.jsxs)(_.Z,{id:n,banner:!1,name:t,picture:s,children:[!!o&&(0,u.jsx)("span",{className:x().serial,children:o}),(0,u.jsx)("span",{className:x().remark,children:i})]}),(0,u.jsxs)("div",{className:x().info,children:[(0,u.jsx)("p",{className:[x().name,"text-overflow-ellipsis"].join(" "),children:(0,u.jsx)(d.rU,{to:"/video/detail/".concat(n),children:t})}),(0,u.jsx)("p",{className:[x().summary,"text-overflow-ellipsis"].join(" "),children:i})]})]}))},f=function(){return(0,u.jsx)("span",{style:{color:"#a9a9a9",padding:"0 8px"},children:"\u8fd8\u6ca1\u6709\u5f71\u7247\u54e6"})};var j=n(1287),y=n.n(j),g=n(19630),b=n(22231),N=n(42532),k=n(97636),S=n.n(k);const I=function(){return(0,u.jsxs)("div",{className:S().loading,children:[(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{})]})};var w=n(32523),Z=function(e){var a=e.videoData,n=e.params,t=(0,g.k6)(),s=(0,g.TH)(),o=a.page,c=a.total,l=a.pageSize,d=a.maxPage,p=c;function v(e){t.push({pathname:s.pathname,query:(0,r.Z)((0,r.Z)({},n),{},{currentPage:e})})}return c/l>d&&(p=d*l),(0,u.jsx)(i.Z,{current:Number(o),total:p,pageSize:l,showSizeChanger:!1,responsive:!0,onChange:v,style:{marginTop:"20px"},showTotal:function(){return(0,u.jsx)("span",{className:"white",children:"\u5171 ".concat(c," \u6761\u5f71\u7247")})}})},B=function(e){var a,n=e.type,i=e.video,r=e.params,c=void 0===r?null:r,l=e.dispatch,d={};d=c?(0,w.A3)(i.searchOrder,c):{};var v=JSON.stringify(d),m=i[v],x=i.loading[v],_=m,j=(0,o.useRef)(),g=(0,N.Z)(j),b=[];return(0,o.useEffect)((function(){!g||_||x||(null===n||void 0===n?void 0:n.id)&&l({type:"video/getData",params:{type:null===n||void 0===n?void 0:n.id}})}),[g]),_||(b=(0,s.Z)(Array(10).keys())),null!==(a=_)&&void 0!==a&&a.data&&(_=_.data),(0,u.jsxs)("div",{className:y().box,ref:j,children:[n&&(0,u.jsx)(p,{type:n}),(0,u.jsxs)(t.Z,{className:y().videoList,gutter:{xs:8,sm:8,md:16,lg:16},children:[x&&(0,u.jsx)(I,{}),(_||b).map((function(e){return(0,u.jsx)(h,{video:e},e.id||e)})),_&&!_.length&&(0,u.jsx)(f,{})]}),!(null===m||void 0===m||!m.total)&&(0,u.jsx)(Z,{videoData:m,params:d})]})};const U=(0,b.connect)((function(e){var a=e.video;return{video:a}}))(B)},1623:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>I});var t=n(3182),s=n(94043),i=n.n(s),r=n(19630),o=n(22231),c=n(2824),l=n(79004),d=n(19611),u=n(15936),p=n.n(u),v=n(67294),m=n(70029),x=n(41486),_=n.n(x),h=n(11067),f=n(42906),j=n(39285),y=n(85893);const g=function(e){var a=e.url;return(0,y.jsx)("iframe",{src:a,frameBorder:"0",width:"100%",height:"100%",allowFullScreen:!0})};var b=function(){var e=(0,r.UO)(),a=e.id,n=(0,r.TH)(),t=(0,v.useState)({}),s=(0,c.Z)(t,2),i=s[0],u=s[1],x=(0,o.useSelector)((function(e){return e.video[a]}))||{},b=(0,o.useSelector)((function(e){return e.player}))||{},N=(0,o.useSelector)((function(e){return e.global.config}))||{},k=(0,v.useState)(!1),S=(0,c.Z)(k,2),I=S[0],w=S[1],Z=(0,v.useState)({}),B=(0,c.Z)(Z,2),U=B[0],D=B[1],O=(0,o.useRequest)(h.Om,{manual:!0}),q=O.run;(0,v.useEffect)((function(){if(x.players){var e=n.query.id,a=x.players.find((function(a){return!(!e||a.id!=e)||(!e||void 0)}));if(!a&&e&&(a=x.players[0]),a&&q(a.id),a){var t,s,i,r,o,c,l,d=(null===(t=a)||void 0===t||null===(s=t.cdn)||void 0===s?void 0:s.path)||(null===(i=a)||void 0===i?void 0:i.url)||"",p=N.globalParse||"";null!==(r=a)&&void 0!==r&&null!==(o=r.cdn)&&void 0!==o&&o.path?p="https://play.pangtai.video/play?url=":null!==(c=a)&&void 0!==c&&c.player&&b[null===(l=a.player)||void 0===l?void 0:l.key]&&(p=b[a.player.key].parse||""),a.url=d,a.parse=p}u({}),setTimeout((function(){u(a)}),0)}}),[n.search,x]),(0,v.useEffect)((function(){if(x.players){var e=x.players.reduce((function(e,a){var n=a.player.key,t=a.title,s=a.url,i=a.id,r={title:t,url:s,id:i};return n in e?e[n].push(r):e[n]=[r],e}),{});D(e)}}),[x.players]),(0,v.useEffect)((function(){if(null!==i&&void 0!==i&&i.id){var e=i.title,a=i.id,n=x.name,t=x.id,s=x.picture,r=x.year,o=x.doubanScore;(0,f.U)({title:e,playId:a,name:n,vodId:t,picture:s[0],year:r,doubanScore:o})}}),[i]);var T=i.title,A=i.url,E=i.parse;return(0,y.jsxs)("div",{children:[(0,y.jsx)(j.Z,{title:"".concat(x.name||"").concat(T||"","-\u5b8c\u6574\u7248\u89c6\u9891\u5728\u7ebf\u89c2\u770b-").concat(N.siteName||""),seoDescribe:"".concat(x.name||"","\uff0c\u662f\u7531").concat(x.director||"","\u5bfc\u6f14\uff0c\u7531").concat(x.actor||"","\u7b49\u4e3b\u6f14\u7684\u5f71\u7247\uff0c\u4e8e").concat(x.year||"","\u4e0a\u6620\u3002\u5f71\u7247\u5267\u60c5\uff1a").concat(x.content||""),seoKey:"".concat(x.name||"","\uff0c\u7535\u89c6\u5267\u5168\u96c6\uff0c\u7535\u89c6\u5267\u5927\u5168\uff0c\u5728\u7ebf\u89c2\u770b\uff0c\u5b8c\u6574\u7248")}),(0,y.jsxs)("div",{className:p().player,children:[(0,y.jsx)("div",{className:p().flashBox,children:(0,y.jsxs)("div",{className:[p().iframe,I?p().iframeUnfold:""].join(" "),children:[(0,l.isBrowser)()&&A&&"/"!=A&&(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(g,{url:"".concat(E).concat(A)})}),(!A||"/"==A)&&(0,y.jsxs)("div",{className:p().loading,children:[(0,y.jsx)("div",{children:"\u8fde\u63a5\u6210\u529f,\u7a0d\u7b49\u6570\u636e\u6b63\u5728\u7f13\u51b2\u4e2d..."}),(0,y.jsx)("img",{src:_(),alt:"loading"})]}),I&&(0,y.jsx)("div",{className:p().open,onClick:function(){return w(!1)}}),!I&&(0,y.jsx)("div",{className:p().close,onClick:function(){return w(!0)}})]})}),(0,y.jsxs)("div",{className:p().playAside,style:{display:I?"none":"block"},children:[(0,y.jsxs)("div",{className:p().videoTitle,children:[(null===x||void 0===x?void 0:x.picture)&&(0,y.jsx)(m.Z,{id:a,banner:!1,name:x.name,picture:null===x||void 0===x?void 0:x.picture[0],playing:!0}),(0,y.jsxs)("div",{className:p().title,children:[(0,y.jsx)("div",{className:p().name,children:x.name}),(0,y.jsxs)("p",{children:["\u8bc4\u5206\uff1a",x.doubanScore]}),(0,y.jsxs)("p",{children:["\u72b6\u6001\uff1a",x.remarks]}),(0,y.jsxs)("p",{children:["\u5e74\u4ee3\uff1a",x.year]}),(0,y.jsxs)("p",{children:["\u5bfc\u6f14\uff1a",x.director]}),(0,y.jsxs)("p",{children:["\u6f14\u5458\uff1a",x.actor]}),(0,y.jsxs)("p",{children:["\u5730\u533a\uff1a",x.area]}),(0,y.jsxs)("p",{children:["\u7c7b\u578b\uff1a",x.vod_class]})]})]}),(0,y.jsxs)("div",{className:p().playerBox,children:[Object.keys(U).map((function(e,a){var t=U[e],s=b[e]||{name:"\u5728\u7ebf\u64ad\u653e".concat(a+1),tips:""};return(0,y.jsxs)("div",{className:p().playerList,children:[(0,y.jsxs)("div",{className:p().playerInfo,children:[(0,y.jsx)("span",{children:s.name}),(0,y.jsx)("span",{children:s.tips})]}),(0,y.jsx)("div",{className:p().playList,children:t.map((function(e,a){return(0,y.jsx)(d.rU,{to:"".concat(n.pathname,"?id=").concat(e.id),className:[p().playItem,i.id==e.id?p().active:""].join(" "),children:e.title},a)}))})]},e)})),!Object.keys(U||{})&&(0,y.jsx)("div",{className:"smile_tips",children:"\u8fd8\u6ca1\u6709\u627e\u5230\u64ad\u653e\u5730\u5740"})]})]})]}),(0,y.jsxs)("div",{className:p().content,children:[(0,y.jsx)("em",{className:p().label,children:"\u7b80\u4ecb\uff1a"}),x.content]})]})};const N=b;var k=n(28142),S=function(){var e=(0,r.UO)(),a=e.id,n=(0,o.useDispatch)(),t=(0,o.useSelector)((function(e){return e.video})),s=t.lastKey||"{}";return(0,v.useEffect)((function(){if(!t.lastKey&&t[a]){var e={type:t[a].typeId,currentPage:1};n({type:"video/getData",params:e}),s=JSON.stringify(e)}})),(0,y.jsxs)("div",{children:[(0,y.jsx)(N,{}),(0,y.jsx)(k.Z,{params:JSON.parse(s)})]})};S.getInitialProps=function(){var e=(0,t.Z)(i().mark((function e(a){var n,t;return i().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.match.params.id,t=a.store.getState(),t.loading.models.video){e.next=5;break}return e.next=5,a.store.dispatch({type:"video/getVideoData",videoId:n});case 5:if(t.loading.models.player){e.next=8;break}return e.next=8,a.store.dispatch({type:"player/getData"});case 8:return e.abrupt("return",a.store.getState());case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();const I=S},42906:(e,a,n)=>{"use strict";n.d(a,{v:()=>t,U:()=>s});var t=function(){var e=window.localStorage.getItem("watch_recrod_key");return e?JSON.parse(e):[]},s=function(e){var a=t().filter((function(a){return a.playId!=e.playId&&a.vodId!=e.vodId}));return a.unshift(e),window.localStorage.setItem("watch_recrod_key",JSON.stringify(a))}},70029:(e,a,n)=>{"use strict";n.d(a,{Z:()=>d});var t=n(2824),s=n(67294),i=n(19611),r=n(15909),o=n.n(r),c=function(e){if(!e||!e.cdn)return(null===e||void 0===e?void 0:e.pic)||(null===e||void 0===e?void 0:e.url)||"/";var a=e.cdn,n=a.r.path,t=a.path;return"".concat("https://cdn.jsdelivr.net/","gh/").concat(n,"@main/").concat(t)},l=n(85893);const d=function(e){var a=e.id,n=e.name,r=void 0===n?"":n,d=e.banner,u=void 0===d||d,p=e.children,v=e.picture,m=e.playing,x=void 0!==m&&m,_=e.query,h=void 0===_?{}:_,f=(0,s.useState)({}),j=(0,t.Z)(f,2),y=j[0],g=j[1];return(0,s.useEffect)((function(){setTimeout((function(){g({backgroundImage:"url(".concat(c(v),")")})}),100)})),(0,l.jsxs)("div",{className:[o().box,u?o().bannerBox:o().videoBox].join(" "),children:[a&&(0,l.jsx)(i.rU,{to:{pathname:"/video/detail/".concat(a),query:h},title:r,style:y,className:[o().imgItem,x?"playing":""].join(" "),children:p}),!a&&(0,l.jsx)(s.Fragment,{children:p})]})}},41486:(e,a,n)=>{e.exports=n.p+"static/play-loading.a110de6e.gif"}}]);